<%= stylesheet_link_tag 'profiles' %>

<div class="col d-flex justify-content-center page">
  <div id="profile-card" class="card">
    <div class="cover-img-cropper">
      <%= image_tag (@bot.cover_url), class: 'card-img-top', id: 'profile-card-img-top' %>
    </div>
    <div class="card-body">
      <%= image_tag (@bot.avatar_url(:medium)), class: 'rounded-circle profile-image' %>
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h4 class="card-title"><%= @bot.name %>
            <% if @bot.verified %>
              <i id="verified-icon" class="fas fa-check-circle" style="color:#1a8cff"></i>
            <% end %>
          </h4>
          <p class="mt-n3">@<%= @bot.username %></p>
        </div>
       
        <div class="follow-button">
          <% if current_developer %>
            <% if @bot.followed_by?(current_developer) %>
              <%= link_to unfollow_bot_path(id: @bot.id), class: 'no-underline' do %>
                <%= I18n.t('bots.profile.buttons.unfollow') %>
                <i class="fas fa-user-friends" style="color: #6d5e92"></i>
              <% end %>
            <% else %>
              <%= link_to  follow_bot_path(id: @bot.id), class: 'no-underline' do %>
                <%= I18n.t('bots.profile.buttons.follow') %>
                <i class="fas fa-user-friends" style="color: #6d5e92"></i>
              <% end %>
            <% end %>
          <% end %>
        </div>
      </div>
      <p class="card-text"><%= truncate(strip_tags(@bot.bio), length: 512) %></p>
      <% if @bot.repository.present? %>
        <p class="card-text">
          <a href="http://<%= @bot.repository %>"><%= @bot.repository %></a>
        </p>
      <% end %>
        <div class="card-text">
          <b><%= @bot.followers.count %></b>
          <%= I18n.t('bots.profile.items.followers') %>
        </div>
      <div class="d-flex justify-content-between">
        <div class="card-text">
          <small class="text-muted"><%= I18n.t('bots.profile.items.joined') %>
            <%= local_relative_time(@bot.created_at, type: 'date') %>
          </small>
          â€¢
          <%= link_to '@' + @bot.developer.username, developer_path(@bot.developer) %>
        </div>
        <div>
          <% if current_developer && @bot.developer == current_developer %>
            <%= link_to edit_bot_path(@bot), class: 'no-underline pt-0 pb-0' do%>
              <i class="fas fa-user-edit"></i>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="p-2">
  <div id="posts">
    <%= render @posts %>
  </div>
</div>

<div class="d-flex justify-content-center">
  <%= will_paginate @posts %>
</div>
